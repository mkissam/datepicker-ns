!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/platform-browser"),require("@angular/core"),require("@angular/forms")):"function"==typeof define&&define.amd?define("datepicker-ns",["exports","@angular/platform-browser","@angular/core","@angular/forms"],e):e(t["datepicker-ns"]={},t.ng.platformBrowser,t.ng.core,t.ng.forms)}(this,function(t,e,n,o){"use strict";var i=(r.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],r.ctorParameters=function(){return[]},r.ngInjectableDef=n.defineInjectable({factory:function(){return new r},token:r,providedIn:"root"}),r);function r(){}function l(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}var s=(a.prototype.isChild=function(t){var e=t.parentNode;if(!e||"undefined"===e.tagName)return!1;var n=e.tagName;return!(!e||"APP-CALENDAR"!==n)||(e&&"HTML"!==n?this.isChild(e):void 0)},a.prototype.handleClick=function(t){t.stopPropagation(),t.preventDefault(),this.isOpen?this.elRef.nativeElement.contains(t.target)||this.close.emit():this.isOpen=!0},a.decorators=[{type:n.Directive,args:[{selector:"[outside]"}]}],a.ctorParameters=function(){return[{type:n.ElementRef}]},a.propDecorators={close:[{type:n.Output,args:["outside"]}],handleClick:[{type:n.HostListener,args:["document:click",["$event"]]}]},a);function a(t){this.elRef=t,this.close=new n.EventEmitter,this.isOpen=!1}var d=function v(){},h=(c.prototype.clickout=function(t){this.onClickOut.emit()},c.prototype.ngOnInit=function(){this._options=Object.assign(this.defaultOptions,this.options),this._options.initDates=0===this._options.initDates.length?[new Date]:this._options.initDates;var t=this._options.initDates[this._options.initDates.length-1];this._currentMonth=new Date(t.getFullYear(),t.getMonth(),1);var e=this.langs().week[this._options.lang];this.weekLabels=e.splice(this._options.weekStart).concat(e),this._getMonthsMatrix(this._currentMonth)},c.prototype.showNext=function(){this._monthMode?(this._currentMonth.setMonth(this._currentMonth.getMonth()+1),this._getMonthsMatrix(this._currentMonth)):(this._currentMonth.setFullYear(this._currentMonth.getFullYear()+1),this.showViewMonth(this._currentMonth))},c.prototype.showPrev=function(){this._monthMode?(this._currentMonth.setMonth(this._currentMonth.getMonth()-1),this._getMonthsMatrix(this._currentMonth)):(this._currentMonth.setFullYear(this._currentMonth.getFullYear()-1),this.showViewMonth(this._currentMonth))},c.prototype.withZero=function(t){return 1===(t=t.toString()).length?"0"+t:t},c.prototype.getDateKey=function(t){return parseInt(t.getFullYear()+""+this.withZero(t.getMonth())+this.withZero(t.getDate()))},c.prototype.showViewMonth=function(t,e){void 0===e&&(e=null),e&&e.stopPropagation();for(var n=t.getFullYear(),o=0;o<4;o++){this._monthCalend[o]=[];for(var i=3*o;i<3*o+3;i++)this._monthCalend[o].push({year:n,month:i,date:new Date(n,i,1)})}this._monthMode=!1},c.prototype.langs=function(){return{week:{en:["Su","Mo","Tu","We","Th","Fr","St"],ru:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]},month:{en:["January","Febrary","March","April","May","June","July","August","September","October","November","December"],ru:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"]}}},c.prototype.isDisabled=function(t){var e=new Date(t);e.setHours(0,0,0,0);var n=new Date(new Date);if(n.setHours(0,0,0,0),this._options.disabled.enabled){var o=this._options.disabled.mode;if("before"===o)return"before"===o&&e.valueOf()<n.valueOf();if("after"===o)return"after"===o&&e.valueOf()>n.valueOf()}return!1},c.prototype.isWeekEnd=function(t){return!!this._options.weekends.includes(this.getNumDay(t))},c.prototype.getMonthByNUm=function(t){return this.langs().month[this._options.lang][t]},c.prototype.getFirstDayNum=function(t){var e=new Date(t.getFullYear(),t.getMonth(),1).getDay();return this.getOffsetDaysStart(e)},c.prototype.getLastDayNum=function(t){var e=new Date(t.getFullYear(),t.getMonth()+1,0).getDay();return this.getOffsetDaysStart(e)},c.prototype.clickDate=function(t,e){void 0===e&&(e=null),e&&e.stopPropagation(),t.disabled||this.selectDay(t)},c.prototype.getDaysInMonth=function(t){return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()},c.prototype.getDaysInPrevMonth=function(t){return new Date(t.getFullYear(),t.getMonth(),0).getDate()},c.prototype.getDay=function(t){var e=new d;return e.key=this.getDateKey(t),e.num=t.getDate(),e.date=new Date(t),e.isNowDate=this.isNowDate(t),e.isWeekEnd=this.isWeekEnd(t),e.disabled=this.isDisabled(t),e.currentMonth=t.getFullYear()===this._currentMonth.getFullYear()&&t.getMonth()===this._currentMonth.getMonth(),e},c.prototype._getMonthsMatrix=function(t){var e=this.getDaysInMonth(t),n=this.getDaysInPrevMonth(t),o=this.getFirstDayNum(t),i=this.getLastDayNum(t),r=[],s=[],a=new Date(t),d=new Date(t);d.setMonth(new Date(t).getMonth()-1);var l=new Date(t);if(l.setMonth(new Date(t).getMonth()+1),0!==o)for(var h=o;0<h;h--){var c=n-h+1;t=new Date(d.getFullYear(),d.getMonth(),c),r.push(this.getDay(t))}for(h=1;h<=e;h++)a.setDate(h),t=new Date(a.getFullYear(),a.getMonth(),h),r.push(this.getDay(t));if(6!==i)for(h=1;h<7-i;h++)t=new Date(l.getFullYear(),l.getMonth(),h),r.push(this.getDay(t));for(h=0;h<r.length/7;h++){for(var p=[],u=7*h;u<7*h+7;u++)p.push(r[u]);s.push(p)}this.calend=r,this.weekCalend=s,this.markselectDay(),this.markPeriodDates()},c.prototype.isNowDate=function(t){var e=new Date;return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},c.prototype.timeChange=function(t){this._options.initDates[t.index]=new Date(t.date)},c.prototype.getNumDay=function(t){return this.getOffsetDaysStart(t.getDay())},c.prototype.getOffsetDaysStart=function(t){return t<this._options.weekStart?7+t-this._options.weekStart:t-this._options.weekStart},c.prototype.selectDay=function(t){if("single"!==this._options.selection.mode)if(this._options.initDates.includes(t.date)||t.isSelected){if("multiple"===this._options.selection.mode)for(var e in this._options.initDates){var n=this._options.initDates[e];this.getDateKey(n)===t.key&&this._options.initDates.splice(parseInt(e),1)}}else"period"===this._options.selection.mode?1===this._options.initDates.length?this._options.initDates.push(t.date):2===this._options.initDates.length&&(this._options.initDates=[],this._options.initDates.push(t.date)):"multiple"===this._options.selection.mode&&this._options.initDates.push(t.date);else this._options.initDates=[t.date];this.markselectDay(),this.markPeriodDates(),this._options.submitMode||this._options.timeMode||this.change()},c.prototype.hoverDate=function(t){this.markPeriodDates(t)},c.prototype.markselectDay=function(){for(var t,e,n=0;n<this.calend.length;n++){var o=this.calend[n],i=!1;try{for(var r=l(this._options.initDates),s=r.next();!s.done;s=r.next()){var a=s.value;this.getDateKey(a)===o.key&&(i=!0)}}catch(d){t={error:d}}finally{try{s&&!s.done&&(e=r["return"])&&e.call(r)}finally{if(t)throw t.error}}this.calend[n].isSelected=i}},c.prototype.markPeriodDates=function(t){void 0===t&&(t=null);for(var e=0;e<this.calend.length;e++){var n=this.calend[e];"period"===this._options.selection.mode&&(1===this._options.initDates.length&&t?n.key>=t.key&&n.key<=this.getDateKey(this._options.initDates[0])||n.key<=t.key&&n.key>=this.getDateKey(this._options.initDates[0])?this.calend[e].markedPeriod=!0:this.calend[e].markedPeriod=!1:2===this._options.initDates.length&&(n.key>=this.getDateKey(this._options.initDates[1])&&n.key<=this.getDateKey(this._options.initDates[0])||n.key<=this.getDateKey(this._options.initDates[1])&&n.key>=this.getDateKey(this._options.initDates[0]))?this.calend[e].markedPeriod=!0:this.calend[e].markedPeriod=!1)}},c.prototype.showMonth=function(t,e){e.stopPropagation(),this._monthMode=!0,this._currentMonth=t,this._getMonthsMatrix(t),this.markselectDay(),this.markPeriodDates()},c.prototype.cancel=function(){this.onCanceled.emit()},c.prototype.submit=function(){this.change()},c.prototype.change=function(){var t;t=this._options.initDates,this.onChanged.emit(t)},c.decorators=[{type:n.Component,args:[{selector:"ns-datepicker",template:'<div class="calendar" (outside)="clickout($event)" >\n\n    <div style="border-bottom: 1px solid #f3f3f3; display:flex; flex-direction: row; justify-content: center; align-items:center; padding:10px;flex-direction: column;">\n        \x3c!--<div *ngIf="suggestions" style="display: block;">\n            <button class="dateBtn" (click)="selectDay(today)">сегодня</button>\n        </div>--\x3e\n      <div style="padding-top:10px; display:flex; flex-direction: row; justify-content: space-between; width: 100%;">\n          <a href="javascript:void(0)" (click)="showPrev()" class="btnPrevNext"><</a>\n          <div class="yearBtn" (click)="showViewMonth(_currentMonth, $event)">\n              <span *ngIf="_monthMode" style="margin-right:3px">{{getMonthByNUm(_currentMonth.getMonth())}}</span> <span>{{_currentMonth.getFullYear()}}</span>\n          </div>\n          <a href="javascript:void(0)" (click)="showNext()"  class="btnPrevNext">></a>\n      </div>\n      \n      \n    \n  \n    </div>\n    <div style="padding: 8px 10px;">\n      \n      <div *ngIf="weekLabels&&_monthMode" class="row">\n        <div class="col h" *ngFor="let label of weekLabels">\n          {{label}}\n        </div>\n      </div>\n  \n  \n      <div *ngIf="weekCalend&&_monthMode">\n        <div class="row" *ngFor="let week of weekCalend">\n            <div \n              *ngFor="let day of week" \n              class="col" \n              [ngClass]="{currentMonth:day.currentMonth, isNowDate: day.isNowDate, isWeekEnd: day.isWeekEnd, isSelected: day.isSelected, markedPeriod: day.markedPeriod, disabled: day.disabled }" \n              (click)="clickDate(day, $event)"\n              (mouseover)="hoverDate(day)"\n            >\n            {{day.num}}\n            <div></div>\n          </div>\n        </div>     \n      </div>\n  \n  \n      <div *ngIf="_monthCalend&&!_monthMode">\n        <div class="row" *ngFor="let months of _monthCalend">\n            <div \n              *ngFor="let month of months"\n              class="col month"\n              (click)="showMonth(month.date, $event)"\n            >\n            {{getMonthByNUm(month.month)}} \n            </div>\n        </div>     \n      </div>\n  \n    </div>\n    <div *ngIf="_options.timeMode" style="border-bottom: 1px solid #f3f3f3; display:flex; flex-direction: column; justify-content: center; padding:10px; font-size: 11px">\n      \n      <div *ngFor="let date of _options.initDates; let i = index">\n        <ns-time [date]="date" [index]="i" (changed)="timeChange($event)"></ns-time>\n      </div>\n\n    </div>\n\n\n    <div *ngIf="_options.timeMode||(!_options.timeMode&&_options.submitMode)" style=" display:flex; flex-direction: row; justify-content: space-between; align-items:center; padding:10px; font-size: 11px">\n      <button class="btnCancel" (click)="cancel()">{{(_options.lang==\'en\')?\'cancel\':\'отмена\'}}</button>\n      <button class="btnOk" (click)="submit()">{{(_options.lang==\'en\')?\'ok\':\'ок\'}}</button>\n    </div>\n  \n  </div>',styles:[".row{display:flex;flex-direction:row}.col{display:flex;position:relative;flex-direction:column;flex:1;justify-content:center;align-items:center;font-size:.8em;padding:4px;border-radius:2px;cursor:pointer;color:#c7c7c7;-webkit-animation:.2s ease-in slide-up;animation:.2s ease-in slide-up;text-align:center}@-webkit-keyframes slide-up{0%{opacity:.5}100%{opacity:1}}@keyframes slide-up{0%{opacity:.5}100%{opacity:1}}.col.markedPeriod{background:#d5ebff!important;border-radius:0!important;transition:.2s}.col.isSelected.markedPeriod{border-radius:2px!important}.col.isSelected{background:#5eb3fc!important;color:#fff!important}.dateBtn{float:left;background:#f3f3f3;border:0;font-size:.74em;color:#2fafff;outline:0;border-radius:2px;cursor:pointer;margin:2px;padding:2px 4px}.dateBtn:hover{background:#6398e0;color:#fff}.col.currentMonth{color:#353540}.col.isNowDate{color:#3f92ff}.col.isWeekEnd.currentMonth{color:#c53c3c}.col.disabled{background:#f5f5f5;color:#afafaf}.col.month:hover,.col:hover{background:#eee}.col.month{font-size:11px;color:#545454;padding:16px 8px;box-shadow:0 0 0 1px #f4f3f3;background:#fff;border-radius:0;min-width:40px}.col.h{color:#ff9a19;text-transform:uppercase}.col.h:hover{background:#fff}.calendar{float:left;box-shadow:0 3px 12px -5px #000;max-width:200px;-webkit-animation:50ms slide-up;animation:50ms slide-up;background:#fff;border-radius:8px}.btnPrevNext{font-size:14px;padding:6px 8px;border-radius:2px;color:#5eb3fc;text-decoration:none}.btnPrevNext:hover{background:#f4f3f3}.yearBtn{font-size:14px;padding:6px 10px;border-radius:2px;color:#585858;cursor:pointer}.yearBtn:hover{background:#f4f3f3}.btnOk{border:0;background:#5eb3fc;padding:8px 16px;color:#fff;border-radius:2px;outline:0;cursor:pointer}.btnOk:hover{background:#3e99e6}.btnCancel{border:0;background:#fff;padding:8px 16px;color:#5eb3fc;border-radius:2px;outline:0;cursor:pointer}.btnCancel:hover{background:#e4f3ff}"]}]}],c.ctorParameters=function(){return[]},c.propDecorators={options:[{type:n.Input}],onChanged:[{type:n.Output}],onCanceled:[{type:n.Output}],onClickOut:[{type:n.Output}]},c);function c(){this.defaultOptions={weekends:[5,6],weekStart:1,lang:"en",selection:{mode:"single",ctrlShift:!1},timeMode:!1,submitMode:!1,suggestions:{enabled:!1},initDates:[new Date],disabled:{enabled:!1,mode:"after"}},this.onChanged=new n.EventEmitter,this.onCanceled=new n.EventEmitter,this.onClickOut=new n.EventEmitter,this._monthCalend=[],this._monthMode=!0}var p=(u.prototype.ngOnInit=function(){this.hour=this.date.getHours(),this.minute=this.date.getMinutes(),this.date.setHours(this.hour,this.minute),this.inited=!0},u.prototype.ngOnChanges=function(){this.inited&&this.date.setHours(this.hour,this.minute)},u.prototype.change=function(){var t=new Date(this.date);t.setHours(this.hour,this.minute),this.changed.emit({index:this.index,date:t})},u.prototype.hourChange=function(){this.change()},u.prototype.minuteChange=function(){this.change()},u.prototype.getTimeArays=function(){for(var t={min:[],hour:[]},e=0;e<60;e++){var n=e.toString(),o={val:e,label:n=1==n.length?"0"+n:n};t.min.push(o),e<24&&t.hour.push(o)}return t},u.decorators=[{type:n.Component,args:[{selector:"ns-time",template:'<div style="display: flex;flex-direction: row;justify-content: space-between;align-items: center; padding: 4px;color: #6f6f6f;background: linear-gradient(90deg,#fff, #e7f4ff); ">\n  <div >{{date.getDate()}}.{{date.getMonth()+1}}.{{date.getFullYear()}}</div>\n    <div>\n      <select [(ngModel)]="hour"  (change)="hourChange()"  style="border: 0; background: transparent; padding: 2px;font-size: 11px; outline: none;">\n        <option *ngFor="let hour of getTimeArays()[\'hour\']" [ngValue]="hour.val">{{hour.label}}</option>\n      </select>\n      <select [(ngModel)]="minute" (change)="minuteChange()" style="border: 0; background: transparent; padding: 2px;font-size: 11px; outline: none;">\n        <option *ngFor="let min of getTimeArays()[\'min\']" [ngValue]="min.val">{{min.label}}</option>\n      </select>\n    </div>\n\n</div>',styles:[""]}]}],u.ctorParameters=function(){return[]},u.propDecorators={date:[{type:n.Input}],index:[{type:n.Input}],changed:[{type:n.Output}]},u);function u(){this.changed=new n.EventEmitter,this.inited=!1}var f=(g.prototype.ngOnInit=function(){},g.decorators=[{type:n.Component,args:[{selector:"ns-col",template:"<p>\n  col works!\n</p>\n",styles:[""]}]}],g.ctorParameters=function(){return[]},g);function g(){}var y=(m.decorators=[{type:n.NgModule,args:[{declarations:[h,s,p,f],imports:[e.BrowserModule,o.FormsModule],exports:[h]}]}],m);function m(){}t.DatepickerService=i,t.Outside=s,t.Day=d,t.DatepickerComponent=h,t.DatepickerModule=y,t.ɵb=f,t.ɵa=p,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=datepicker-ns.umd.min.js.map